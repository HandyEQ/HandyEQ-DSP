function y = iirtest(int32(x))
%IIRTEST Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 8.2 and the DSP System Toolbox 8.5.
% Generated on: 28-Mar-2014 11:47:17

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % Fpass = 15000;   % Passband Frequency
    % Fstop = 16000;   % Stopband Frequency
    % Apass = 1;       % Passband Ripple (dB)
    % Astop = 87;      % Stopband Attenuation (dB)
    % Fs    = 480000;  % Sampling Frequency
    %
    % h = fdesign.lowpass('fp,fst,ap,ast', Fpass, Fstop, Apass, Astop, Fs);
    %
    % Hd = design(h, 'cheby2', ...
    %     'MatchExactly', 'stopband', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 -1.95619087747475 1 1 -1.95460751683106 ...
        0.993766914230882; 1 -1.95534427600493 1 1 -1.94157368968943 ...
        0.98115835173635; 1 -1.95358481989145 1 1 -1.92721841775735 ...
        0.967919198164312; 1 -1.95076876344421 1 1 -1.91090286296554 ...
        0.95347507016423; 1 -1.94664902432246 1 1 -1.89183642821237 ...
        0.937150804676563; 1 -1.94082640635807 1 1 -1.86899891230291 ...
        0.918105035437737; 1 -1.93266027776174 1 1 -1.84103652440158 ...
        0.895245727525944; 1 -1.9211013847454 1 1 -1.80612468918537 ...
        0.867120712086669; 1 -1.90436377632784 1 1 -1.76180081768202 ...
        0.831785413824616; 1 -1.87923735936865 1 1 -1.70480800933624 ...
        0.786679567336435; 1 -1.83952120323651 1 1 -1.63110403765667 ...
        0.728633314652392; 1 -1.77205291601903 1 1 -1.53648262815985 ...
        0.654351628369765; 1 -1.64519827131272 1 1 -1.41885440158955 ...
        0.562194807291804; 1 -1.3695255535332 1 1 -1.28384368591419 ...
        0.456548195994803; 1 -0.643583999333677 1 1 -1.15356689701717 ...
        0.354676234716615; 1 1.28421567368998 1 1 -1.0692049267824 ...
        0.288730839725806], ...
        'ScaleValues', [0.893863997783841; 0.886440942067977; ...
        0.876885111977859; 0.864739750147297; 0.849363594362106; ...
        0.829865487500581; 0.805010791885321; 0.773093706454424; ...
        0.731779167509794; 0.677954353864484; 0.607739333561063; ...
        0.517089309287924; 0.404001429848153; 0.273927850761364; ...
        0.148265235444471; 0.0668427212932579; 1], ...
        'SectionInputDataType', 'Custom', ...
        'CustomSectionInputDataType', numerictype([],16,10), ...
        'SectionOutputDataType', 'Custom', ...
        'CustomSectionOutputDataType', numerictype([],16,11), ...
        'NumeratorCoefficientsDataType', 'Custom', ...
        'CustomNumeratorCoefficientsDataType', numerictype([],16,14), ...
        'DenominatorCoefficientsDataType', 'Custom', ...
        'CustomDenominatorCoefficientsDataType', numerictype([],16,14), ...
        'ScaleValuesDataType', 'Custom', ...
        'CustomScaleValuesDataType', numerictype([],16,15), ...
        'NumeratorProductDataType', 'Custom', ...
        'CustomNumeratorProductDataType', numerictype([],32,29), ...
        'DenominatorProductDataType', 'Custom', ...
        'CustomDenominatorProductDataType', numerictype([],32,29), ...
        'NumeratorAccumulatorDataType', 'Custom', ...
        'CustomNumeratorAccumulatorDataType', numerictype([],40,29), ...
        'DenominatorAccumulatorDataType', 'Custom', ...
        'CustomDenominatorAccumulatorDataType', numerictype([],40,29), ...
        'StateDataType', 'Custom', ...
        'CustomStateDataType', numerictype([],16,15), ...
        'OutputDataType', 'Custom', ...
        'CustomOutputDataType', numerictype([],16,11), ...
        'RoundingMethod', 'Convergent');
end

y = step(Hd,x);


